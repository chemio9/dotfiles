# ---ATTENTION---
# mbsync configuration is seperated in many *sections*
# each section has to be written on continuous lines
# otherwise, it will break
# ---------------

IMAPAccount chen
Host imap.gmail.com # Address to connect to
Port 993
Timeout 0 # unlimited
# Use TLS
# CertificateFile /etc/ssl/certs/ca-certificates.crt
SSLType IMAPS
SystemCertificates yes
User chengruichen3@gmail.com
PassCmd "mailctl access chengruichen3@gmail.com" # use mailctl to handle authentication
AuthMechs XOAUTH2

IMAPStore gmail-remote
Account chen

MaildirStore gmail-local
SubFolders Verbatim
Path ~/.mail/ # The trailing "/" is important
Inbox ~/.mail/Inbox

Channel gmail
Far :gmail-remote:
Near :gmail-local:
# Exclude everything under the internal [Gmail] folder
Patterns * ![Gmail]*
# Automatically create missing mailboxes, both locally and on the server
Create Both
# Sync the movement of messages between folders and deletions, add after making sure the sync works
Expunge Both
# Save the synchronization state files in the relevant directory
SyncState *
